webpackJsonp([2],{"5YSy":function(t,e){},"72x0":function(t,e,a){a("7XU4"),t.exports=a("AKd3").Object.keys},"7XU4":function(t,e,a){var i=a("OXaN"),s=a("5pnV");a("t+Om")("keys",function(){return function(t){return s(i(t))}})},"8yMf":function(t,e){},"B22/":function(t,e){},JS3c:function(t,e){},JhO9:function(t,e){},"T/z5":function(t,e){},TQ4A:function(t,e){},ZLEe:function(t,e,a){t.exports={default:a("72x0"),__esModule:!0}},c0bm:function(t,e){},ikwX:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("ZLEe"),s=a.n(i),n={name:"outFraudEchart",props:["optionData"],data:function(){return{myChart:null}},mounted:function(){this.drawLine()},methods:{drawLine:function(){this.myChart=this.$echarts.init(document.getElementById("outFraudBusiness")),this.myChart.setOption(this.optionData)}},beforeDestroy:function(){this.myChart&&(this.myChart.dispose(),this.myChart=null)},watch:{optionData:function(t){console.log(t)}}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"outFraudBusinessEchart"},[e("div",{ref:"outFraudBusiness",attrs:{id:"outFraudBusiness"}})])},staticRenderFns:[]};var o=a("C7Lr")(n,r,!1,function(t){a("c0bm")},"data-v-7bb03def",null).exports,c={name:"outFraudRule",props:["optionData","typeDataVal"],data:function(){return{typeData:"1"}},mounted:function(){},methods:{typeDataChange:function(t){console.log(t)}},computed:{typeVal:function(){return this.typeDataVal}},beforeDestroy:function(){console.log("注销Rule")},watch:{}},l={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"outFraudRuleEchart"},[e("div",{attrs:{id:"outFraudRule"}})])}]};var u=a("C7Lr")(c,l,!1,function(t){a("5YSy")},"data-v-48640cd1",null).exports,d=a("VGsm"),h={props:["outfraud","ruleData"],name:"outFraud",data:function(){return{activeName:"1",typeData:"1",isList:"",businessChart:null,ruleChart:null,fullscreenLoading:!0,optionBusiness:{title:{text:"模型结果数据",textStyle:{color:"#292E32",fontStyle:"normal",fontWeight:"bold",fontSize:14}},tooltip:{trigger:"axis",formatter:function(t){var e="",a=t.reduce(function(t,e,a,i){return 0==(t+=parseInt(e.value))?1e-11:t},0);return e=t[0].name+"<br/>",t.map(function(t,i){e+=t.seriesName+":"+t.value+"("+1e4*(t.value/a).toFixed(4)/100+"%)<br/>"}),e}},grid:{left:"40",top:"88"},legend:{icon:"stack",x:"left",left:"154",itemWidth:22,itemHeight:4,data:["拒绝数","通过数","人工审核数"]},xAxis:{name:"时间",splitLine:{show:!0,lineStyle:{color:"#E4E7F2"}},axisLabel:{show:!0,textStyle:{color:"#6C7380"}},data:[]},yAxis:{name:"次数",type:"value",splitLine:{show:!0,lineStyle:{color:"#E4E7F2"}},axisLabel:{show:!0,textStyle:{color:"#6C7380"}}},series:[{name:"拒绝数",type:"line",itemStyle:{normal:{lineStyle:{color:"#FF7A6F"},color:"#FF7A6F"}},data:[]},{name:"通过数",type:"line",itemStyle:{normal:{lineStyle:{color:"#40BDEC"},color:"#40BDEC"}},data:[]},{name:"人工审核数",type:"line",itemStyle:{normal:{lineStyle:{color:"#42CFC6"},color:"#42CFC6"}},data:[]}]},optionRule:{title:{text:"概况统计：规则名称",textStyle:{color:"#292E32",fontStyle:"normal",fontWeight:"bold",fontSize:14}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(t,e,a){var i="",s=t.reduce(function(t,e,a,i){return parseInt(e.data),i[2].data},0);return t.map(function(e,a){var n=1e6*(parseInt(t[0].data)/parseInt(s)).toFixed(4)/1e4,r=1e6*(parseInt(t[1].data)/parseInt(s)).toFixed(4)/1e4;"异常"==e.seriesName?i+="异常:"+e.data+"次("+r+"%)<br/>":"命中"==e.seriesName?i+="命中:"+e.data+"次("+n+"%)<br/>":i+="总计："+s+"次"}),i}},legend:{icon:"stack",x:"left",left:"154",data:["命中","异常"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",show:!1,axisLine:{lineStyle:{width:"0"}},axisTick:{show:!1,alignWithLabel:!0},axisLabel:{},splitLine:{show:!1}},yAxis:{type:"category",inverse:!0,axisLine:{lineStyle:{width:"0"}},axisLabel:{interval:0},axisTick:{show:!1},data:[]},series:[{name:"命中",type:"bar",stack:"总量",data:[],barWidth:30,show:!0,label:{normal:{show:!1,position:"insideRight"}},itemStyle:{normal:{color:"#FFD052",label:{show:!0}}}},{name:"异常",type:"bar",data:[],barWidth:30,stack:"总量",show:!0,label:{normal:{show:!1,position:"insideRight"}},itemStyle:{normal:{color:"#fd7c28",label:{show:!0}}}},{name:"总计",type:"bar",data:[],barWidth:30,stack:"总量",show:!0,label:{normal:{show:!0,position:"insideLeft",textStyle:{color:"#000"},formatter:function(t){return"总计："+t.value+"次"}}},itemStyle:{normal:{color:"rgba(128, 128, 128, 0)"}}}]}}},mounted:function(){this.drawLine()},computed:{outFrautBusinessData:function(){return this.outfraud},outFrautRuleData:function(){return this.ruleData}},components:{outFraudBusinessEchart:o,outFrandRuleEchart:u,noData:d.a},methods:{handleClick:function(t,e){"1"==t.name?this.drawLine():"2"==t.name&&(this.typeData="1",this.$emit("listenRule",1),this.drawRule())},drawLine:function(){this.businessChart=this.$echarts.init(document.getElementById("outFraudBusiness")),this.businessChart.setOption(this.optionBusiness)},drawRule:function(){this.ruleChart=this.$echarts.init(document.getElementById("outFraudRule"));var t=40*this.optionRule.series[0].data.length+100;this.ruleChart.resize({height:t}),this.ruleChart.setOption(this.optionRule)}},watch:{outFrautBusinessData:function(t){var e=this,a=[],i=[],s=[],n=[];t.detailList.map(function(t,r){a.push(t.acceptCount),i.push(t.refuseCount),s.push(t.reviewCount),"1"==e.$local.get("dateEq")?n.push(""+t.startTime.substring(0,10)):n.push(t.endTime.substring(11,16)+"\n"+t.endTime.substring(0,10))}),this.optionBusiness.series[0].data=i,this.optionBusiness.series[1].data=a,this.optionBusiness.series[2].data=s,this.optionBusiness.xAxis.data=n,this.isList=t.detailList,this.drawLine()},outFrautRuleData:function(t){var e=[],a=[],i=[],s=[];switch(t.detailList.map(function(t,n){e.push(""+t.hitCount),a.push(""+t.exceptionCount),i.push(t.hitCount+t.exceptionCount),s.push(t.label||t.policyName)}),this.optionRule.yAxis.data=s,this.optionRule.series[0].data=e,this.optionRule.series[1].data=a,this.optionRule.series[2].data=i,this.drawRule(),this.typeData){case 1:this.optionRule.title.text="概况统计：规则名称",this.drawRule();break;case 2:this.optionRule.title.text="概况统计：策略名称",this.drawRule();break;case 3:this.optionRule.title.text="概况统计：决策代码",this.drawRule()}},typeData:function(t){this.ruleChart=null,this.$emit("listenRule",t)}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"outFraud"},[""!=t.isList?a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"业务数据",name:"1"}},[a("ul",{staticClass:"pandectDiv"},[a("li",[a("p",[a("label",[t._v(t._s(t.outFrautBusinessData.totalCount||0))])]),t._v(" "),a("span",[t._v("调用量")]),t._v(" "),a("i")]),t._v(" "),a("li",[a("p",[a("label",[t._v(t._s(parseInt(100*t.outFrautBusinessData.refusePercent||0))+"%")]),t._v(" "),a("span",[t._v(t._s(parseInt(t.outFrautBusinessData.refuseCount||0))+"件")])]),t._v(" "),a("span",[t._v("拒绝")]),t._v(" "),a("i")]),t._v(" "),a("li",[a("p",[a("label",[t._v(t._s(parseInt(100*t.outFrautBusinessData.reviewPercent||0))+"%")]),t._v(" "),a("span",[t._v(t._s(parseInt(t.outFrautBusinessData.reviewCount||0))+"件")])]),t._v(" "),a("span",[t._v("人工")]),t._v(" "),a("i")]),t._v(" "),a("li",[a("p",[a("label",[t._v(t._s(parseInt(100*t.outFrautBusinessData.acceptPercent||0))+"%")]),t._v(" "),a("span",[t._v(t._s(parseInt(t.outFrautBusinessData.acceptCount||0))+"件")])]),t._v(" "),a("span",[t._v("通过")]),t._v(" "),a("i")]),t._v(" "),a("li",[a("p",[a("label",[t._v(t._s(t.outFrautBusinessData.avgCostTime||0)+"ms")])]),t._v(" "),a("span",[t._v("平均响应时长")])])])]),t._v(" "),a("el-tab-pane",{attrs:{label:"规则数据",name:"2"}},[a("el-radio-group",{staticClass:"ruleType",attrs:{size:"mini"},model:{value:t.typeData,callback:function(e){t.typeData=e},expression:"typeData"}},[a("el-radio-button",{attrs:{label:1}},[t._v("规则名称")]),t._v(" "),a("el-radio-button",{attrs:{label:2}},[t._v("策略名称")]),t._v(" "),a("el-radio-button",{attrs:{label:3}},[t._v("决策代码")])],1)],1)],1):t._e(),t._v(" "),"1"==t.activeName&&""==t.isList?a("noData",{staticClass:"noData",attrs:{img:"noData",p2:"暂无数据"}}):t._e(),t._v(" "),"2"==t.activeName&&""==t.outFrautRuleData.detailList?a("noData",{staticClass:"noData",attrs:{img:"noData",p2:"暂无数据"}}):"1"==t.activeName&&""!=t.isList?a("outFraud-businessEchart",{attrs:{optionData:t.optionBusiness}}):"2"==t.activeName&&""!=t.outFrautRuleData.detailList?a("outFrand-ruleEchart",{attrs:{optionData:t.optionRule,typeDataVal:t.typeData}}):t._e()],1)},staticRenderFns:[]};var m=a("C7Lr")(h,p,!1,function(t){a("B22/"),a("JhO9")},"data-v-658c417c",null).exports,v={name:"credit",props:["optionData","tipData"],data:function(){return{rangle:"2000",scoreRangle:[],myChart:null}},created:function(){for(var t=500;t<=1e4;t++)t%10==0&&this.scoreRangle.push(t)},mounted:function(){this.drawBar()},computed:{creditData:function(){return this.tipData}},methods:{drawBar:function(){this.myChart=this.$echarts.init(document.getElementById("credit")),this.myChart.setOption(this.optionData)}},beforeDestroy:function(){this.myChart&&(this.myChart.dispose(),this.myChart=null,this.$bus.$off("switchCredit",2e3))},watch:{rangle:function(t){this.$bus.$emit("switchCredit",t)}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"credit"},[a("div",{staticClass:"countDiv"},[a("p",[t._v("最大值："+t._s(t.creditData.maxScore))]),t._v(" "),a("p",[t._v("最小值："+t._s(t.creditData.minScore))]),t._v(" "),a("p",[t._v("中间数："+t._s(t.creditData.medianScore))]),t._v(" "),a("p",[t._v("额度分段：\n            "),a("el-select",{attrs:{size:"mini",filterable:""},model:{value:t.rangle,callback:function(e){t.rangle=e},expression:"rangle"}},t._l(t.scoreRangle,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}))],1)]),t._v(" "),a("div",{attrs:{id:"credit"}})])},staticRenderFns:[]};var _={props:["credit"],name:"outFraud",data:function(){return{activeName:"1",xValue:[],yValue:[],totalNum:0,isList:"",creditChart:null,optionCredit:{title:{text:"额度分布",textStyle:{color:"#292E32",fontStyle:"normal",fontWeight:"bold",fontSize:14}},tooltip:{trigger:"item",formatter:function(t){return t.data.dateRange+"<br/>区间："+t.data.name+"<br/>"+t.data.seriesName+":"+t.data.value+"("+1e6*(t.data.value/t.data.total).toFixed(4)/1e4+"%)"},textStyle:{fontSize:12}},grid:{left:"80",top:"88"},xAxis:{name:"额度",type:"category",inverse:!0,data:[]},yAxis:{name:"用户数",type:"value",splitLine:{show:!0}},series:[{name:"用户数",type:"bar",data:[{name:"name",seriesName:"用户数",value:0,total:1,dateRange:""}],barMaxWidth:40,show:!0,itemStyle:{normal:{color:"#42CFC6"}}}]}}},mounted:function(){},components:{creditEchart:a("C7Lr")(v,f,!1,function(t){a("jpdK")},"data-v-451c48ea",null).exports,noData:d.a},computed:{creditData:function(){return this.credit}},methods:{drawBar:function(){this.creditChart=this.$echarts.init(document.getElementById("credit")),this.creditChart.setOption(this.optionCredit)}},watch:{credit:function(t){var e=[],a=[];this.totalNum=t.totalCount,t.detailList.map(function(i){e.unshift("["+i.minScore+","+i.maxScore+")"),a.unshift({name:"["+i.minScore+","+i.maxScore+")",seriesName:"用户数",value:i.totalCount,total:t.totalCount,dateRange:t.startTime+"-"+t.endTime})}),this.optionCredit.xAxis.data=e,this.optionCredit.series[0].data=a,this.isList=t.detailList,this.drawBar()}}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"credit"},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[""!=t.isList?a("el-tab-pane",{attrs:{label:"授信",name:"1",activeName:t.activeName}},[a("ul",{staticClass:"pandectDiv"},[a("li",[a("p",[a("label",[t._v(t._s(t.creditData.totalCount||0))])]),t._v(" "),a("span",[t._v("调用量")]),t._v(" "),a("i")]),t._v(" "),a("li",[a("p",[a("label",[t._v(t._s(t.creditData.avgScore||0))])]),t._v(" "),a("span",[t._v("件均")]),t._v(" "),a("i")]),t._v(" "),a("li",[a("p",[a("label",[t._v(t._s(t.creditData.avgCostTime||0)+"ms")])]),t._v(" "),a("span",[t._v("平均响应时长")])])])]):t._e()],1),t._v(" "),""!=t.isList?a("creditEchart",{attrs:{optionData:t.optionCredit,tipData:t.creditData}}):t._e(),t._v(" "),""==t.isList?a("noData",{staticClass:"noData",attrs:{img:"noData",p2:"暂无数据"}}):t._e()],1)},staticRenderFns:[]};var y=a("C7Lr")(_,D,!1,function(t){a("T/z5"),a("mRVB")},"data-v-0e0c88e7",null).exports,b={name:"score",props:["optionData","tipData"],data:function(){return{rangle:"50",scoreRangle:[],myChart:null}},created:function(){for(var t=50;t<=1e3;t++)t%10==0&&this.scoreRangle.push(t)},mounted:function(){this.drawBar()},computed:{scoreData:function(){return this.tipData}},methods:{drawBar:function(){this.$echarts.init(document.getElementById("score")).setOption(this.optionData)}},beforeDestroy:function(){this.myChart&&(this.myChart.dispose(),this.myChart=null,this.$bus.$off("switchScore",50))},watch:{rangle:function(t){this.$bus.$emit("switchScore",t)}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"score"},[a("div",{staticClass:"countDiv"},[a("p",[t._v("最大值："+t._s(t.scoreData.maxScore))]),t._v(" "),a("p",[t._v("最小值："+t._s(t.scoreData.minScore))]),t._v(" "),a("p",[t._v("平均数："+t._s(t.scoreData.avgScore))]),t._v(" "),a("p",[t._v("中间数："+t._s(t.scoreData.medianScore))]),t._v(" "),a("p",[t._v("方差："+t._s(t.scoreData.maxScore))]),t._v(" "),a("p",[t._v("评分分段：\n            "),a("el-select",{attrs:{size:"mini",filterable:""},model:{value:t.rangle,callback:function(e){t.rangle=e},expression:"rangle"}},t._l(t.scoreRangle,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}))],1)]),t._v(" "),a("div",{attrs:{id:"score"}})])},staticRenderFns:[]};var C=a("C7Lr")(b,g,!1,function(t){a("qQeB")},"data-v-cb775676",null).exports,x={props:{header:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},fileName:{type:String,default:"data.csv"}},created:function(){var t=this;this.$bus.$on("getScoreListData",function(e){t.data=e})},methods:{handleClick:function(){var t=this;this.$bus.$emit("outCsv",50);var e="data:text/csv;charset=utf-8,\ufeff";e+=this.headerLabel+"\n",this.data.forEach(function(a,i){for(var s="",n=0;n<t.headerProp.length;n++)s+=a[t.headerProp[n]]+",";e+=i<t.data.length?s.replace(/,$/,"\n"):s.replace(/,$/,"")}),this.$refs.link.setAttribute("href",encodeURI(e)),this.$refs.link.setAttribute("download",this.fileName)}},computed:{headerLabel:function(){return this.header.map(function(t){return t.label}).join(",")},headerProp:function(){return this.header.map(function(t){return t.prop})}}},w={render:function(){var t=this.$createElement;return(this._self._c||t)("a",{ref:"link",staticClass:"download-btn",on:{click:this.handleClick}},[this._v("导出")])},staticRenderFns:[]};var L={props:["tipData"],data:function(){return{tableData:[]}},components:{out:a("C7Lr")(x,w,!1,function(t){a("TQ4A")},"data-v-562924b7",null).exports},methods:{outBtn:function(){this.$bus.$emit("outCsv",50)}}},R={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tableDiv"},[e("div",{staticClass:"tipDiv"},[e("p",[this._v("下图为参考样图，具体数据详情请点击右方“导出数据”按钮")]),this._v(" "),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:this.outBtn}},[this._v("导出数据")])],1),this._v(" "),this._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{attrs:{src:a("sll/"),alt:""}}),this._v(" "),e("br"),this._v(" "),e("br")])}]};var S={name:"score",props:["score"],data:function(){return{scoreActive:"1",myChart:null,isList:"",optionScore:{title:{text:"评分分布",textStyle:{color:"#292E32",fontStyle:"normal",fontWeight:"bold",fontSize:14}},tooltip:{trigger:"item",axisPointer:{type:"none"},formatter:function(t){return t.data.dateRange+"<br/>区间："+t.data.name+"<br/>"+t.data.seriesName+":"+t.data.value+"("+1e6*(t.data.value/t.data.total).toFixed(4)/1e4+"%)"},textStyle:{fontSize:12}},grid:{left:"40",top:"88"},xAxis:{name:"额度",type:"category",splitLine:{show:!0},data:[]},yAxis:{name:"用户数",type:"value",splitLine:{show:!0}},series:[{name:"用户数",type:"bar",data:[{name:"name",seriesName:"用户数",value:0,total:1,dateRange:""}],barMaxWidth:40,itemStyle:{normal:{color:"#FF9966"}}}]}}},mounted:function(){},computed:{scoreData:function(){return this.score}},components:{scoreEchart:C,scoreTable:a("C7Lr")(L,R,!1,function(t){a("qZQi")},"data-v-c0889922",null).exports,noData:d.a},methods:{handleClick:function(t,e){},drawBar:function(){this.myChart=this.$echarts.init(document.getElementById("score")),this.myChart.setOption(this.optionScore)}},watch:{score:function(t){var e=[],a=[];t.detailList.map(function(i){e.push("["+i.minScore+","+i.maxScore+")"),a.unshift({name:"["+i.minScore+","+i.maxScore+")",seriesName:"用户数",value:i.totalCount,total:t.totalCount,dateRange:t.startTime+"-"+t.endTime})}),this.optionScore.xAxis.data=e,this.optionScore.series[0].data=a,this.isList=t.detailList,this.drawBar()}}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"scoreDiv"},[""!=t.isList?a("el-tabs",{model:{value:t.scoreActive,callback:function(e){t.scoreActive=e},expression:"scoreActive"}},[a("el-tab-pane",{attrs:{label:"概览",name:"1"}},[a("ul",{staticClass:"pandectDiv"},[a("li",[a("p",[a("label",[t._v(t._s(t.scoreData.totalCount||0))])]),t._v(" "),a("span",[t._v("调用量")]),t._v(" "),a("i")]),t._v(" "),a("li",[a("p",[a("label",[t._v(t._s(t.scoreData.avgScore||0))])]),t._v(" "),a("span",[t._v("评分均值")]),t._v(" "),a("i")]),t._v(" "),a("li",[a("p",[a("label",[t._v(t._s(t.scoreData.avgCostTime||0)+"ms")])]),t._v(" "),a("span",[t._v("平均响应时长")])])])]),t._v(" "),a("el-tab-pane",{attrs:{label:"详情",name:"2"}})],1):t._e(),t._v(" "),"1"==t.scoreActive&&""!=t.isList?a("scoreEchart",{attrs:{optionData:t.optionScore,tipData:t.scoreData}}):t._e(),t._v(" "),""==t.isList?a("noData",{staticClass:"noData",attrs:{img:"noData",p2:"暂无数据"}}):"2"==t.scoreActive&&""!=t.isList?a("scoreTable"):t._e()],1)},staticRenderFns:[]};function $(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var i in a)if(new RegExp("("+i+")").test(e)){var s=a[i]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?s:B(s))}return e}function B(t){return("00"+t).substr(t.length)}var E={name:"detailIndex",data:function(){return{typeList:[],projectType:"",projectList:[],projectName:"",projectId:"",rangeDate:"",dateRangeList:[{name:"今天",value:"0"},{name:"昨天",value:"1"},{name:"最近7天",value:"6"},{name:"最近30天",value:"30"}],dateCurrent:"",startDate:"",endDate:"",creditData:{},outFraudData:{},outFraudRuleData:{},scoreData:{},ruleType:"1"}},components:{outFraud:m,credit:y,score:a("C7Lr")(S,F,!1,function(t){a("JS3c"),a("8yMf")},"data-v-cb2164a6",null).exports,noData:d.a},created:function(){var t=this;this.$bus.$on("switchScore",function(e){t.getScord(e)}),this.$bus.$on("switchCredit",function(e){t.getCredit(e)}),this.$bus.$on("outCsv",function(e){t.getScordDetail(e)})},mounted:function(){this.startDate=$(new Date((new Date).getTime()),"yyyy-MM-dd")+" 00:00:00",this.endDate=$(new Date((new Date).getTime()),"yyyy-MM-dd hh:mm:ss"),this.getProList(),this.searchBtn()},computed:{startEnd:function(){return new Date(this.endDate).getTime()-new Date(this.startDate).getTime()>432e6?this.$local.set("dateEq",1):this.$local.set("dateEq",-1)}},methods:{searchBtn:function(){this.getData()},getProList:function(){var t=this;this.$post("/mcs/product/list",{pageNo:-1}).then(function(e){t.typeList=e.productList})},getModelList:function(){var t=this;this.$post("/mcs/mold/code/list",{appId:this.projectType,pageNo:-1}).then(function(e){t.projectList=e.moldList})},getBusinessData:function(){var t=this;this.$post("/mcs/monitor/statistic/af/model/result",{partnerId:this.$getCookie("businessCode"),appId:this.projectType,modelId:this.projectId,startTime:this.startDate,endTime:this.endDate}).then(function(e){t.outFraudData=e})},getRuleData:function(t){var e=this;this.ruleType=t;var a="/mcs/monitor/statistic/rule/result/by/name";switch(t){case 1:a="/mcs/monitor/statistic/rule/result/by/name";break;case 2:a="/mcs/monitor/statistic/policy/result";break;case 3:a="/mcs/monitor/statistic/rule/result/by/code"}this.$post(a,{partnerId:this.$getCookie("businessCode"),appId:this.projectType,modelId:this.projectId,startTime:this.startDate,endTime:this.endDate}).then(function(t){e.outFraudRuleData=t})},getScord:function(t){var e=this;this.$post("/mcs/monitor/statistic/card/model/result",{partnerId:this.$getCookie("businessCode"),appId:this.projectType,modelId:this.projectId,startTime:this.startDate,endTime:this.endDate,segment:""==t?"50":t}).then(function(t){e.scoreData=t})},getScordDetail:function(t){var e=this;this.$post("/mcs/monitor/statistic/card/model/result/detail",{partnerId:this.$getCookie("businessCode"),appId:this.projectType,modelId:this.projectId,startTime:this.startDate,endTime:this.endDate,segment:""==t?"50":t}).then(function(t){var a=s()(t[0]).sort();e.$exportCSV(t,a)})},getCredit:function(t){var e=this;this.$post("/mcs/monitor/statistic/credit/model/result",{partnerId:this.$getCookie("businessCode"),appId:this.projectType,modelId:this.projectId,startTime:this.startDate,endTime:this.endDate,segment:""==t?"2000":t}).then(function(t){e.creditData=t})},dateRangeClick:function(t,e){this.rangeDate="",this.dateCurrent=e,this.startDate=$(new Date((new Date).getTime()-864e5*t.value),"yyyy-MM-dd")+" 00:00:00",this.endDate="1"==t.value?$(new Date((new Date).getTime()),"yyyy-MM-dd")+" 00:00:00":$(new Date((new Date).getTime()),"yyyy-MM-dd hh:mm:ss"),this.getData()},getData:function(){switch(this.projectName){case 1:switch(this.ruleType){case 1:case 2:case 3:this.getRuleData(this.ruleType)}this.getBusinessData();break;case 3:this.getCredit(2e3);break;case 4:this.getScord(50)}},outExcel:function(){switch(console.log("导出数据"),this.projectName){case 1:this.$exportCSV(this.outFraudData.detailList);break;case 3:case 4:this.$exportCSV(this.creditData.detailList)}}},watch:{rangeDate:function(t){""==t||(this.startDate=t[0],this.endDate=t[1],this.dateCurrent=-1,this.getData())},projectType:function(t){this.projectId="",this.getModelList()},projectId:function(t){var e=this;this.projectList.map(function(a,i){a.moldCode==t&&(e.projectName=e.projectList[i].moldType)}),this.dateRangeClick({value:0},0)},startEnd:function(t){}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detailIndex"},[a("div",{staticClass:"menuDiv"},[a("div",{staticClass:"formDiv"},[a("div",{staticClass:"selectDiv"},[a("el-select",{attrs:{placeholder:"产品名称",size:"small"},model:{value:t.projectType,callback:function(e){t.projectType=e},expression:"projectType"}},t._l(t.typeList,function(t,e){return a("el-option",{key:e,attrs:{label:t.productName,value:t.appId}})})),t._v(" "),a("el-select",{staticClass:"name",attrs:{placeholder:"请选择名称",size:"small",filterable:""},model:{value:t.projectId,callback:function(e){t.projectId=e},expression:"projectId"}},t._l(t.projectList,function(t,e){return a("el-option",{key:e,attrs:{label:t.moldName,value:t.moldCode}})}))],1),t._v(" "),a("div",{staticClass:"timeDiv"},[a("span",[t._v("统计时间：")]),t._v(" "),a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",size:"small"},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}})],1),t._v(" "),a("div",{staticClass:"timeRangeDiv"},t._l(t.dateRangeList,function(e,i){return a("p",{class:i==t.dateCurrent?"hover":"",on:{click:function(a){t.dateRangeClick(e,i)}}},[t._v("\n                    "+t._s(e.name)+"\n                ")])})),t._v(" "),a("div",{staticClass:"btnDiv"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.searchBtn}},[t._v("查询")])],1)]),t._v(" "),a("div",{staticClass:"outBtnDiv"},[a("el-button",{attrs:{size:"small",icon:"el-icon-upload2"},on:{click:t.outExcel}},[t._v("导出数据")])],1)]),t._v(" "),a("div",{staticClass:"mainDiv"},["1"==t.projectName?a("outFraud",{attrs:{outfraud:t.outFraudData,ruleData:t.outFraudRuleData},on:{listenRule:t.getRuleData}}):t._e(),t._v(" "),"4"==t.projectName?a("score",{attrs:{score:t.scoreData}}):t._e(),t._v(" "),"3"==t.projectName?a("credit",{attrs:{credit:t.creditData}}):t._e()],1)])},staticRenderFns:[]};var T=a("C7Lr")(E,k,!1,function(t){a("tRNU"),a("wjXz")},"data-v-7795def1",null);e.default=T.exports},jpdK:function(t,e){},mRVB:function(t,e){},qQeB:function(t,e){},qZQi:function(t,e){},"sll/":function(t,e,a){t.exports=a.p+"static/img/table.fac69b3.png"},"t+Om":function(t,e,a){var i=a("FITv"),s=a("AKd3"),n=a("BRDz");t.exports=function(t,e){var a=(s.Object||{})[t]||Object[t],r={};r[t]=e(a),i(i.S+i.F*n(function(){a(1)}),"Object",r)}},tRNU:function(t,e){},wjXz:function(t,e){}});