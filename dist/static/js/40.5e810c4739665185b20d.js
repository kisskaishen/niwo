webpackJsonp([40],{"0GWk":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("MgeX"),l=t.n(i),s={name:"pages_dictList",data:function(){return{btnDisabled:!1,modelForm:{appId:"",keyword:"",variableType:"",source:""},showPlane:!1,productList:[],variableList:[],pagePara:{currentPage:1,count:0,pageNo:1,pageSize:10},loading:!0}},components:{noData:t("VGsm").a},watch:{"modelForm.appId":function(){console.log(this.modelForm.appId)}},beforeRouteUpdate:function(e,a,t){this.postData(),this.products(),t()},mounted:function(){this.products(),0==this.$route.meta.keepAlive&&this.postData()},methods:{btnSearch:function(){this.btnDisabled=!0,this.pagePara.pageNo=1,this.postData()},postData:function(){var e=this;this.loading=!0;var a=this.$session.get("dictListData"),t={appId:this.modelForm.appId,keyword:this.modelForm.keyword,variableType:this.modelForm.variableType,source:this.modelForm.source,pageNo:this.pagePara.pageNo,pageSize:this.pagePara.pageSize};l()(t).map(function(t){l()(a).map(function(i){t!=i&&(t=i,e.pagePara.pageNo=a.pageNo)})}),this.$post("/mcs/variable/list",t).then(function(a){e.loading=!1,e.variableList=a.variableList,e.pagePara.count=a.count,e.$session.set("dictListData",t),e.btnDisabled=!1})},addVariableItem:function(){this.$router.push("/risk/dictMg/dictList/dictAdd")},handleSizeChange:function(e){this.pagePara.pageSize=Number(e),this.postData()},handleCurrentChange:function(e){this.pagePara.pageNo=Number(e),this.postData()},products:function(){var e=this;this.$post("/mcs/product/list",{productName:this.modelForm.keyword}).then(function(a){e.productList=a.productList})},delVariableItem:function(e){var a=this;this.$msgbox.confirm("",{title:"系统提示",message:'<p class="f_333">确认要删除'+e.variableName+"变量？",dangerouslyUseHTMLString:!0,type:"warning"}).then(function(){a.$post("/mcs/variable/delete",{variableId:e.variableId,appId:e.appId}).then(function(e){a.$message.success("删除成功"),a.postData()})}).catch(function(){})},updateVariableStatus:function(e){var a=this,t=1==e.active?"确定禁用"+e.variableName+"变量？":"确定启用"+e.variableName+"变量？";this.$msgbox.confirm("",{title:"系统提示",message:'<p class="f_333">'+t+"</p>",dangerouslyUseHTMLString:!0,type:"warning"}).then(function(){var t=1==e.active?"禁用成功":"启用成功";a.$post("/mcs/variable/status/update",{variableId:e.variableId}).then(function(e){a.$message.success(t),a.postData()})})},editDictItem:function(e){this.$router.push({path:"/risk/dictMg/dictList/dictEdit",query:{variableId:e.variableId,source:e.source}})}},beforeRouteLeave:function(e,a,t){"/risk/dictMg/dictList/dictAdd"==e.path||"/risk/dictMg/dictList/dictEdit"==e.path?(a.meta.keepAlive=!0,t()):(a.meta.keepAlive=!1,t())},activated:function(){1==this.$route.meta.keepAlive&&this.postData()}},r={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return"dictList"==e.$route.name?t("div",{staticClass:"pages_dictList"},[t("el-form",{ref:"modelForm",staticClass:"modelForm inlineBlock mg_t_20",attrs:{"status-icon":"","label-position":"left"}},[t("el-form-item",{staticClass:"fl mg_r_20 productList",attrs:{label:"产品线：","label-width":"60px"}},[t("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"small"},model:{value:e.modelForm.appId,callback:function(a){e.$set(e.modelForm,"appId",a)},expression:"modelForm.appId"}},[t("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.productList,function(e,a){return t("el-option",{key:a,attrs:{label:e.productName,value:e.appId}})})],2)],1),e._v(" "),t("el-form-item",{staticClass:"fl mg_r_20 moldName",attrs:{label:"变量名称：","label-width":"80px"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入关键字",clearable:""},nativeOn:{keyup:function(a){return"button"in a||!e._k(a.keyCode,"enter",13,a.key,"Enter")?e.btnSearch(a):null}},model:{value:e.modelForm.keyword,callback:function(a){e.$set(e.modelForm,"keyword","string"==typeof a?a.trim():a)},expression:"modelForm.keyword"}})],1),e._v(" "),t("el-button",{staticClass:"fl",staticStyle:{width:"80px"},attrs:{type:"primary",size:"small",disabled:e.btnDisabled},on:{click:e.btnSearch}},[e._v("查询\n        ")]),e._v(" "),t("el-button",{staticClass:"fl",attrs:{type:"text"},on:{click:function(a){e.showPlane=!e.showPlane}}},[e._v("\n            更多筛选条件\n            "),e.showPlane?t("i",{staticClass:"el-icon-caret-top el-icon--right"}):t("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e._v(" "),t("el-button",{staticClass:"fr",attrs:{size:"small",plain:""},on:{click:e.addVariableItem}},[e._v("+新增变量")])],1),e._v(" "),e.showPlane?t("div",{staticClass:"plane"},[t("el-form",{attrs:{"status-icon":"","label-position":"left"}},[t("el-form-item",{staticClass:"mg_r_20 moldName",attrs:{label:"变量类型：","label-width":"100px"}},[t("el-radio-group",{model:{value:e.modelForm.variableType,callback:function(a){e.$set(e.modelForm,"variableType",a)},expression:"modelForm.variableType"}},[t("el-radio",{attrs:{label:""}},[e._v("全部")]),e._v(" "),t("el-radio",{attrs:{label:1}},[e._v("字符串")]),e._v(" "),t("el-radio",{attrs:{label:2}},[e._v("整型")]),e._v(" "),t("el-radio",{attrs:{label:3}},[e._v("浮点型")]),e._v(" "),t("el-radio",{attrs:{label:4}},[e._v("日期型")]),e._v(" "),t("el-radio",{attrs:{label:5}},[e._v("枚举")]),e._v(" "),t("el-radio",{attrs:{label:6}},[e._v("布尔型")])],1)],1)],1)],1):e._e(),e._v(" "),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"tableBd"},[e.variableList.length?t("el-table",{staticClass:"productListTable mg_t_20",attrs:{data:e.variableList,border:"","header-row-class-name":"table_hd","header-cell-class-name":"table_th","row-class-name":"table_tr","cell-class-name":"table_td"}},[t("el-table-column",{attrs:{prop:"variableId",label:"变量ID",width:"120px",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"变量名",prop:"variableName",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"productName",label:"产品线",width:"140px",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"variableType",label:"变量类型",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[1==a.row.variableType?t("span",[e._v("字符串")]):e._e(),e._v(" "),2==a.row.variableType?t("span",[e._v("整型")]):e._e(),e._v(" "),3==a.row.variableType?t("span",[e._v("浮点型")]):e._e(),e._v(" "),4==a.row.variableType?t("span",[e._v("日期型")]):e._e(),e._v(" "),5==a.row.variableType?t("span",[e._v("枚举")]):e._e(),e._v(" "),6==a.row.variableType?t("span",[e._v("布尔型")]):e._e()]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"remark",label:"备注信息",width:"320px",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"active",label:"状态",width:"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[1==a.row.active?t("span",[e._v("可用")]):e._e(),e._v(" "),0==a.row.active?t("span",{staticStyle:{color:"#ffa49d"}},[e._v("不可用")]):e._e()]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"160px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"buts"},[t("a",{class:{"color-ff7a6f":1==a.row.active},attrs:{href:"javascript:;"},on:{click:function(t){e.updateVariableStatus(a.row,a.row.active)}}},[e._v(e._s(1==a.row.active?"禁用":"启用"))]),e._v(" "),t("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.editDictItem(a.row)}}},[e._v("编辑")]),e._v(" "),t("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.delVariableItem(a.row)}}},[e._v("删除")])])]}}])})],1):e.loading?e._e():t("noData",{attrs:{img:"noData",p2:"暂无数据"}}),e._v(" "),e.variableList.length?t("div",{staticClass:"block pagination"},[t("el-pagination",{attrs:{"current-page":e.pagePara.pageNo,"page-sizes":[10,15,20],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.pagePara.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)],1):t("router-view")},staticRenderFns:[]};var o=t("C7Lr")(s,r,!1,function(e){t("2ZAb")},"data-v-54d113fa",null);a.default=o.exports},"2ZAb":function(e,a){}});