webpackJsonp([37],{"9v9X":function(t,e){},"Q+la":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={name:"pages_proList",data:function(){return{btnDisabled:!1,pageName:"pages_proList",searchText:"",productList:[],pagePara:{currentPage:1,count:0,pageNo:1,pageSize:10},tmp:{td:{}},show:{proAdd:!1},addProForm:{productName:""}}},components:{noData:a("VGsm").a},created:function(){this.getProductList()},beforeRouteUpdate:function(t,e,a){this.getProductList(),a()},beforeRouteLeave:function(t,e,a){"risk"==t.name?a("/risk/proMg/proList"):a()},methods:{proDetail:function(t){this.$router.push({path:"/risk/modelMg/modelList",query:{appId:t.appId}})},proEdit:function(t){},proDel:function(t){var e=this;this.$msgbox.confirm("",{title:"系统提示",message:'<p class="f_333">确认要删除该产品线？</p><p class="f_666 f12">如确认，产品线下模型都将被删除</p>',dangerouslyUseHTMLString:!0,type:"warning"}).then(function(){e.$post("/mcs/product/delete",{appId:t.appId}).then(function(t){e.$message.success("删除成功"),e.getProductList()})}).catch(function(){})},addProClose:function(t){this.$router.push("proList")},addPro:function(){var t=this;this.btnDisabled=!0,this.addProForm.productName&&axios({url:"/mcs/product/create",data:{productName:this.addProForm.productName,pageNo:this.pagePara.pageNo,pageSize:this.pagePara.pageSize},loadingDom:".addProDialog .el-dialog",ret:0,successMsg:"添加成功"},function(e){t.$router.push("proList"),t.addProForm.productName="",t.getProductList(),t.btnDisabled=!1},function(t){})},searchProductList:function(){},getProductList:function(){var t=this;this.$post("/mcs/product/list",{productName:this.searchText,pageSize:this.pagePara.pageSize,pageNo:this.pagePara.pageNo}).then(function(e){t.productList=e.productList,t.pagePara.count=e.count})},inputProName:function(t,e,a){t&&(this.tmp.td[a.appId]=e.productName,e.productName=t)},tdEditOpen:function(t,e,a,o){},editBlur:function(t,e){t.target.blur(),e.editeFlag=!1},updateProName:function(t,e){var a=this;this.tmp.td[e.appId]&&t.productName!=this.tmp.td[e.appId]&&this.$post("/mcs/product/update",{appId:t.appId,name:t.productName}).then(function(e){a.$message.success("修改成功"),t.editeFlag=!1})},handleSizeChange:function(t){this.pagePara.pageSize=Number(t),this.getProductList()},handleCurrentChange:function(t){this.pagePara.pageNo=Number(t),this.getProductList()}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return"proList"==t.$route.name?a("div",{staticClass:"pages_proList mg_t_20"},[a("div",{staticClass:"productList_hd"},[a("el-input",{attrs:{size:"small",placeholder:"请输入查询关键字",clearable:""},nativeOn:{keyup:[function(e){return t.searchProductList(e)},function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getProductList(e):null}]},model:{value:t.searchText,callback:function(e){t.searchText="string"==typeof e?e.trim():e},expression:"searchText"}}),t._v(" "),a("el-button",{staticClass:"mg_l_10",staticStyle:{width:"80px"},attrs:{size:"small",type:"primary",disabled:t.btnDisabled},on:{click:t.getProductList}},[t._v("查询")])],1),t._v(" "),a("div",{staticClass:"productList_bd relative"},[t.productList.length?a("el-table",{staticClass:"productListTable mg_t_20",attrs:{data:t.productList,border:"","header-row-class-name":"table_hd","header-cell-class-name":"table_th","row-class-name":"table_tr","cell-class-name":"table_td"},on:{"cell-click":t.tdEditOpen}},[a("el-table-column",{attrs:{prop:"appId",label:"产品ID",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"产品名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{attrs:{appId:"pro_"+e.row.appId}},[e.row.editeFlag?a("div",[a("el-input",{attrs:{value:e.row.productName,size:"medium",placeholder:"请输入产品名称",clearable:""},on:{input:function(a){t.inputProName(a,e.row,e.column)},change:function(a){t.updateProName(e.row,e.column)}},nativeOn:{keyup:function(a){t.editBlur(a,e.row)}}})],1):a("div",[t._v(t._s(e.row.productName))])])}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createBy",label:"创建人",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.proDetail(e.row)}}},[t._v("\n                        查看\n                    ")])]}}])})],1):a("noData",{attrs:{img:"noData",p2:"暂无数据"}}),t._v(" "),a("div",{staticClass:"block pagination"},[a("el-pagination",{attrs:{"current-page":t.pagePara.currentPage,"page-sizes":[10,15,20],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.pagePara.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-dialog",{staticClass:"addProDialog",attrs:{visible:t.$route.path.indexOf("/proAdd")>-1,wappIdth:"412px",center:"",top:"28vh",title:"新增产品","close-on-click-modal":!1,"before-close":t.addProClose},on:{"update:visible":function(e){t.$set(t.$route.path,"indexOf('/proAdd')>-1",e)}}},[t._v("\n        请输入产品名称：\n        "),a("el-input",{attrs:{size:"medium",placeholder:"请输入产品名称",clearable:""},nativeOn:{keyup:function(e){return t.addPro(e)}},model:{value:t.addProForm.productName,callback:function(e){t.$set(t.addProForm,"productName","string"==typeof e?e.trim():e)},expression:"addProForm.productName"}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium",plain:""},on:{click:t.addProClose}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{size:"medium",type:t.addProForm.productName?"primary":"info",disabled:!t.addProForm.productName},on:{click:t.addPro}},[t._v("确定 ")])],1)],1)],1):a("router-view")},staticRenderFns:[]};var i=a("C7Lr")(o,r,!1,function(t){a("9v9X")},"data-v-57b4f147",null);e.default=i.exports}});